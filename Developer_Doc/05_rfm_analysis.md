# ๐งฉ rfm_analysis.py โ ุจุฎุดโุจูุฏ ูุดุชุฑุงู ุจุง ูุฏู RFM

ุงู ูุงฺูู ูุดุชุฑุงู ุฑุง ุจุฑุงุณุงุณ ุฑูุชุงุฑ ุฎุฑุฏุดุงู ุฎูุดูโุจูุฏ ูโฺฉูุฏ.

RFM ูุฎูู:

๐ **Recency** โ ุขุฎุฑู ุฎุฑุฏ ฺูุฏุฑ ุงุฎุฑ ุจูุฏูุ  
๐ **Frequency** โ ฺูุฏ ุจุงุฑ ุฎุฑุฏ ฺฉุฑุฏูุ  
๐ฐ **Monetary** โ ฺูุฏุฑ ุฎุฑุฌ ฺฉุฑุฏูุ

ุงู ุณู ุดุงุฎุต ุณุชูู ููุฑุงุช ุณุณุชูโูุง CRM ู ุจุงุฒุงุฑุงุจ ุฏุงุฏูโูุญูุฑ ูุณุชูุฏ.

---

# ๐ฏ ูุฏู ุงู ูุงฺูู

ุงุฌุงุฏ:

- ุณฺฏููุช ูุดุชุฑุงู ๐ฅ
- ุดูุงุณุง ูุดุชุฑุงู ููุงุฏุงุฑ โญ
- ุชุดุฎุต ูุดุชุฑุงู ุฏุฑ ูุนุฑุถ ุฑุฒุด โ๏ธ
- ูุดุชุฑุงู VIP ๐
- ูุดุชุฑุงู ฺฉูโูุนุงู ๐ค

ู ุฐุฎุฑู ุฎุฑูุฌ ุจุฑุง ุฏุงุดุจูุฑุฏ ูุฏุฑุช.

---

# ๐งญ ุฌุงฺฏุงู ุฏุฑ Pipeline

data/clean/retail_clean.csv
โ
rfm_analysis.py
โ
output/
โโโ rfm_table.csv
โโโ rfm_clusters.csv
โโโ rfm_clusters_plot.png

---

# ๐ฅ ูุฑูุฏ ุฏุงุฏู

- data/clean/retail_clean.csv

---

# ๐ค ุฎุฑูุฌโูุง

๐ rfm_table.csv โ ููุงุฏุฑ ุฎุงู RFM  
๐ rfm_clusters.csv โ ุณฺฏููุช ููุง  
๐ผ rfm_clusters_plot.png โ ูููุฏุงุฑ ุชุตูุฑ

---

# ๐งฎ ูุญุงุณุจู RFM

---

## ๐ Snapshot Date ฺุณุชุ

```python
snapshot_date = df['InvoiceDate'].max() + pd.Timedelta(days=1)
```

ฺฉ ุฑูุฒ ุจุนุฏ ุงุฒ ุขุฎุฑู ุฎุฑุฏ ุชุนุฑู ูโุดูุฏ ุชุง:

Recency = ูุงุตูู ุขุฎุฑู ุฎุฑุฏ ุชุง ุงูุฑูุฒ.

---

## ๐ ฺฏุฑููโุจูุฏ ูุดุชุฑโูุง

```
rfm = df.groupby('CustomerID').agg({
    'InvoiceDate': lambda x: (snapshot_date - x.max()).days,
    'InvoiceNo': 'count',
    'TotalPrice': 'sum'
})
```

ุจุฑุง ูุฑ ูุดุชุฑ:

- ูุงุตูู ุงุฒ ุขุฎุฑู ุฎุฑุฏ

- ุชุนุฏุงุฏ ูุงฺฉุชูุฑูุง

- ูุฌููุน ูุจูุบ ูพุฑุฏุงุฎุช

---

## โ๏ธ ุชุบุฑ ูุงู ุณุชููโูุง

```
rfm.rename(columns={
    'InvoiceDate': 'Recency',
    'InvoiceNo': 'Frequency',
    'TotalPrice': 'Monetary'
}, inplace=True)
```

ูุงูโูุง ุงุณุชุงูุฏุงุฑุฏ ุตูุนุช.

---

## ๐พ ุฐุฎุฑู ุฌุฏูู ุฎุงู

```
output/rfm_table.csv
```

ุจุฑุง ุชุญูู ุฏุณุช ุง Excel ุนุงู ุงุณุช.

---

# โ๏ธ ฺุฑุง ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ูุงุฒู ุงุณุชุ

KMeans ุจุง ูุงุตูู ุงููุฏุณ ฺฉุงุฑ ูโฺฉูุฏ.

ุงฺฏุฑ Monetary ุฎู ุจุฒุฑฺฏ ุจุงุดุฏ:

๐งฒ ูููโฺุฒ ุฑุง ูโฺฉุดุฏ ุณูุช ุฎูุฏุด.

ูพุณ ุจุงุฏ ููุงุณโูุง ฺฉ ุดููุฏ:

```
scaler = StandardScaler()
rfm_scaled = scaler.fit_transform(rfm)
```

---

# ๐ง ุฎูุดูโุจูุฏ ุจุง KMeans

```
kmeans = KMeans(n_clusters=4, random_state=42)
rfm['Cluster'] = kmeans.fit_predict(rfm_scaled)
```

ุนู:

๐งช ูุดุชุฑโูุง ุฑุง ุฏุฑ ด ุชูพ ุฑูุชุงุฑ ุชูุณู ฺฉู.

ุนุฏุฏ ด ูุนูููุงู ููุงูุฏู:

- VIP

- ูุนุงู ูุชูุณุท

- ฺฉูโูุนุงู

- ุฏุฑ ุญุงู ุฑุฒุด

ุงุณุช.

---

# ๐ ูููุฏุงุฑ ุณฺฏููุชโูุง

```
plt.scatter(rfm['Recency'], rfm['Monetary'], c=rfm['Cluster'])
```

ูุญูุฑ ุงูู: Recency
ูุญูุฑ ุนููุฏ: Monetary

ูุฑ ุฑูฺฏ = ฺฉ ุณฺฏููุช ๐ฅ

---

# ๐ง ฺฉุงุฑุจุฑุฏ ูุงูุน ุงู ุจุฎุด

ุฏุฑ ุดุฑฺฉุช ูุงูุน:

- ุงุฑุณุงู ุชุฎูู ูุฏูููุฏ ๐ฏ

- ฺฉููพู ููุงุฏุงุฑ ๐ณ

- ุดูุงุณุง ูุดุชุฑุงู ุณูุฏุขูุฑ ๐

- ฺฉุงูุด churn ๐

- ูพุดโุจู CLV

---

# ๐ ุชูุณุนูโูุง ุขูุฏู

- ุชุนู n_clusters ุจุง Elbow Method

- DBSCAN ุจุฑุง ฺฉุดู ุฎูุดูโูุง ูุงููุธู

- ูุฏูโูุง ูพุดโุจู churn

- ุงุชุตุงู ูุณุชูู ุจู CRM

- ุขูพุฏุช ุฑูุฒุงูู ุงุชููุงุชฺฉ

---

# โ ุฌูุนโุจูุฏ

ุงู ูุงฺูู:

โ๏ธ RFM ูุญุงุณุจู ูโฺฉูุฏ
โ๏ธ ูุดุชุฑโูุง ุฑุง ุฎูุดูโุจูุฏ ูโฺฉูุฏ
โ๏ธ ุฎุฑูุฌ ูุฏุฑุช ุฏุงุฑุฏ
โ๏ธ ฺฉุงููุงู ุตูุนุช ุงุณุช
โ๏ธ ูพุงู ุณุณุชู CRM ุชุญูู ุงุณุช