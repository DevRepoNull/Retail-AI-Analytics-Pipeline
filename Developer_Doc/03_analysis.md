# ๐ analysis.py โ ุชุญูู ุงฺฉุชุดุงูุ ูพุดโุจู ูพุงูุ ุฎูุดูโุจูุฏ ู ูุงููุฌุงุฑ

ุงู ูุงฺูู ุงููู ูุฑุญููโ ุฌุฏ ุชุญูู ุฏุงุฏู ุฏุฑ ูพุฑูฺู Retail AI ุงุณุช.

ุฏุฑ ุงู ูุงู ฺูุงุฑ ฺฉุงุฑ ุงุตู ุงูุฌุงู ูโุดูุฏ:

1๏ธโฃ ุชุญูู ุงฺฉุชุดุงู ุฏุงุฏู (EDA)  
2๏ธโฃ ูพุดโุจู ูุฑูุด ุจุง ูุฏูโูุง ูพุงู  
3๏ธโฃ ุฎูุดูโุจูุฏ ูุดุชุฑุงู (RFM + KMeans)  
4๏ธโฃ ุชุดุฎุต ูุงููุฌุงุฑ ุจุง Isolation Forest  

---

# ๐ฏ ูุฏู ุงู ูุงู ฺุณุชุ

`analysis.py` ุจุฑุง ูพุงุณุฎ ุจู ุงู ุณุคุงูโูุง ููุดุชู ุดุฏู:

- ุชูุฒุน ูุจูุบ ูุงฺฉุชูุฑูุง ฺฺฏููู ุงุณุชุ
- ุขุง ูโุดูุฏ ุฑููุฏ ูุฑูุด ุฑุง ูุฏู ฺฉุฑุฏุ
- ูุดุชุฑโูุง ฺู ุชูพโูุง ุฏุงุฑูุฏุ
- ฺฉุฏุงู ุชุฑุงฺฉูุดโูุง ุบุฑุนุงุฏโุงูุฏุ

ุงู ูุงู ูู ุงุจุฒุงุฑ ุชุญูู ุงููู ุงุณุช ู ูู baseline ูุฏูโูุง ุจุฑุง ูุฑุงุญู ุจุนุฏ.

---

# ๐งญ ุฌุงฺฏุงู ุฏุฑ Pipeline

data/clean/
โ
analysis.py
โ
output/
โโโ invoice_total_distribution.png
โโโ sales_forecast.csv
โโโ customer_clusters.csv
โโโ anomalies.csv

---

# ๐ ฺฉุฏ ฺฉุงูู

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

from sklearn.linear_model import LinearRegression
from sklearn.ensemble import RandomForestRegressor, IsolationForest
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import mean_absolute_error, mean_squared_error
from sklearn.cluster import KMeans

import os

os.makedirs("output", exist_ok=True)

df = pd.read_csv("data/clean/retail_clean.csv")
df['InvoiceDate'] = pd.to_datetime(df['InvoiceDate'])
```
(ฺฉุฏ ฺฉุงูู ุฏุฑ ูุงู ุงุตู ูุฑุงุฑ ุฏุงุฑุฏ.)

---

# ๐งฉ ฺฉุชุงุจุฎุงููโูุง ุงุณุชูุงุฏูโุดุฏู ุฏุฑ ุงู ูุงฺูู

- pandas / numpy โ ุฏุงุฏู

- matplotlib / seaborn โ ูููุฏุงุฑ

- scikit-learn โ ูุฏูโูุง

- os โ ูุฏุฑุช ูุงู

---

# ๐ ุจุฎุด ุงูู: EDA โ ุชูุฒุน ูุจูุบ ูุงฺฉุชูุฑ

---

## ๐ ุณุงุฎุช invoice_totals

```
invoice_totals = df.groupby("InvoiceNo")["TotalPrice"].sum()
```

ูุฑ ูุงฺฉุชูุฑ ููฺฉู ุงุณุช ฺูุฏ ุฑุฏู ุฏุงุดุชู ุจุงุดุฏุ ุงู ุฎุท ูุจูุบ ฺฉู ูุฑ ูุงฺฉุชูุฑ ุฑุง ุญุณุงุจ ูโฺฉูุฏ.

---

## ๐ ุฑุณู ูุณุชูฺฏุฑุงู

```
plt.hist(invoice_totals, bins=50)
```

ุชูุฒุน ุฎุฑุฏ ูุดุชุฑโูุง ุฑุง ูุดุงู ูโุฏูุฏ.

ูููุฏุงุฑ ุฐุฎุฑู ูโุดูุฏ:

```
output/invoice_total_distribution.png
```

---

# ๐ฎ ุจุฎุด ุฏูู: ูพุดโุจู ูุฑูุด (Baseline Models)

---

## ๐ ุชุฌูุน ุฑูุฒุงูู ูุฑูุด

```
daily_sales = df.groupby(df['InvoiceDate'].dt.date)
['TotalPrice'].sum()
```
ุณุงุฎุช ุฏุชุงุณุช ุณุฑ ุฒูุงู.

---

## โ๏ธ ุชูุณู Train/Test
ณฐ ุฑูุฒ ุขุฎุฑ ุจุฑุง ุชุณุช ฺฉูุงุฑ ฺฏุฐุงุดุชู ูโุดูุฏ.

X ุตุฑูุงู index ุฒูุงู ุงุณุช.

---

## ๐ Linear Regression

ูุฏู ุณุงุฏู ุจุฑุง baseline:

- ุณุฑุน

- ูุงุจู ุชูุณุฑ

- ูู ุบุฑุฎุทโูุง ุฑุง ุฎูุจ ููโฺฏุฑุฏ.

ูุชุฑฺฉโูุง:

- MAE

- RMSE

---

## ๐ฒ Random Forest

ูุฏู ููโุชุฑ:

- ุบุฑุฎุท

- ููุงูู ุจู ููุฒ

ูพุดโุจูโูุง ุฐุฎุฑู ูโุดููุฏ:

```
output/sales_forecast.csv
```

---

# ๐ฅ ุจุฎุด ุณูู: RFM + KMeans

---

## ๐ ุณุงุฎุช ุฌุฏูู RFM

```
rfm = df.groupby('CustomerID').agg({...})
```

ุชุนุฑู:

- Recency โ ฺูุฏ ุฑูุฒ ุงุฒ ุขุฎุฑู ุฎุฑุฏ

- Frequency โ ุชุนุฏุงุฏ ุชุฑุงฺฉูุด

- Monetary โ ฺฉู ุฎุฑุฏ

---

## ๐ ูุฑูุงูโุณุงุฒ

```
scaler = StandardScaler()
```
ุจุฑุง ุงูฺฉู ููุงุณโูุง ุจุฑุงุจุฑ ุดููุฏ.

---

## ๐ฏ ุฎูุดูโุจูุฏ ุจุง KMeans

```
kmeans = KMeans(n_clusters=4)
```

ด ุณฺฏููุช ูุดุชุฑ.

ูุชุฌู:

```
output/customer_clusters.csv
```

---

# ๐จ ุจุฎุด ฺูุงุฑู: ุชุดุฎุต ูุงููุฌุงุฑ

---

## ๐ ูฺฺฏโูุง

```
X = df[['Quantity', 'TotalPrice']]
```

---

## ๐ฒ Isolation Forest

ุงูฺฏูุฑุชู ูุฎุตูุต anomaly detection.

ููุงุท ูพุฑุช:

```
output/anomalies.csv
```

---

## ๐ค ูุฑูุฏโูุง ู ุฎุฑูุฌโูุง

๐ฅ ูุฑูุฏ

- data/clean/retail_clean.csv

๐ค ุฎุฑูุฌโูุง

ุฏุฑ output/:

- invoice_total_distribution.png

- sales_forecast.csv

- customer_clusters.csv

- anomalies.csv

---

# ๐ง ูฺฉุงุช ุทุฑุงุญ ูู

ุงู ูุงู:

โ๏ธ ฺูุฏ ุชุญูู ูุฎุชูู ุฑุง ฺฉโุฌุง ุงุฌุฑุง ูโฺฉูุฏ
โ๏ธ baseline ูุฏูโูุง ุฑุง ูโุฏูุฏ
โ๏ธ ุฏุงุฏูโ ุณฺฏููุชโุดุฏู ูโุณุงุฒุฏ
โ๏ธ anomaly report ุชููุฏ ูโฺฉูุฏ

ุฏุฑ ูุณุฎู ุตูุนุชโุชุฑ:

- ุงู ูุงูโูุง ุฌุฏุง ูโุดููุฏ (EDA / forecasting / clustering)

- cross-validation ุฒูุงู ุงุถุงูู ูโุดูุฏ

- config ูุฑฺฉุฒ ุณุงุฎุชู ูโุดูุฏ

- logging ุฌุง print ูโุขุฏ

---

# โ ุฌูุนโุจูุฏ ุงู ูุงฺูู

analysis.py:

โ๏ธ ููุจ ุชุญูู ูพุฑูฺู ุงุณุช
โ๏ธ ฺูุฏ ูุฏู ูพุงู ูโุณุงุฒุฏ
โ๏ธ ุณฺฏููุช ูุดุชุฑ ุชููุฏ ูโฺฉูุฏ
โ๏ธ ูุงููุฌุงุฑ ฺฉุดู ูโฺฉูุฏ
โ๏ธ ุฏุงุฏู ุฎุฑูุฌ ุจุฑุง ุฏุงุดุจูุฑุฏ ูโุฏูุฏ